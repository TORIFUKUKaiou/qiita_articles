---
title: "ã€Œ.NET ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’ Kubernetes ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€ã‚’ã‚„ã£ã¦ã¿ã‚‹\U0001F355"
tags:
  - Azure
  - QiitaAzure
private: false
updated_at: '2021-11-11T07:43:11+09:00'
id: c42ec9f330d78dd9d6cc
organization_url_name: fukuokaex
slide: false
ignorePublish: false
---
https://qiita.com/official-events/8bc3780a142f8ee8effa

# ã¯ã˜ã‚ã«
- [Azure Kubernetes Service(AKS)](https://azure.microsoft.com/ja-jp/services/kubernetes-service/#overview)ã‚’æ¥½ã—ã‚“ã§ã„ã¾ã™ã‹:bangbang::bangbang::bangbang:
- ç§ã¯[Kubernetes](https://kubernetes.io/ja/)åˆå¿ƒè€…ã§ã™[^1]
- ã€Œ[Azure Kubernetes Serviceã«é–¢ã™ã‚‹è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã‚ˆã†ï¼](https://qiita.com/official-events/8bc3780a142f8ee8effa)ã€ã‚’æœŸã«å…¥é–€ã—ã¦ã¿ã‚ˆã†ã¨ãŠã‚‚ã„ã¾ã™

[^1]: ä½•ã®è‡ªæ…¢ã«ã‚‚ãªã‚Šã¾ã›ã‚“

# [ã‚³ãƒ³ãƒ†ãƒŠãƒ¼åŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Azure Kubernetes Service ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/aks-deploy-container-app/)
ã©ã“ã‹ã‚‰å§‹ã‚ãŸã‚‰ã„ã„ã®ï¼Ÿ
[MS Learn](https://docs.microsoft.com/ja-jp/learn/)ã§ã—ã‚‡:bangbang:
ã£ã¦ã“ã¨ã§ã€Œ[ã‚³ãƒ³ãƒ†ãƒŠãƒ¼åŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Azure Kubernetes Service ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/aks-deploy-container-app/)ã€ã‹ã‚‰å–ã‚Šçµ„ã‚“ã§ã¿ã¾ã—ãŸã€‚
ã—ã‹ã—ã€ã€Œ[æ¼”ç¿’ - Azure Kubernetes Service ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ä½œæˆã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/aks-deploy-container-app/3-exercise-create-aks-cluster?tabs=linux)ã€ãŒã©ã†ã‚‚ã†ã¾ãã„ãã¾ã›ã‚“ã§ã—ãŸã‚ˆ:sob:
å¿…æ®ºæŠ€ã®<font color="purple">$\huge{è‹±èªã§èª­ã‚€}$</font>ãƒªãƒ³ã‚¯ã‚’æŠ¼ã—ã¦ã€è‹±èªã®ãƒšãƒ¼ã‚¸ã‚’èª­ã‚“ã§è‹±èªã¯è‹±èªã®ã¾ã¾ç†è§£ã™ã‚‹ã“ã¨ã‚’å¿ƒãŒã‘ã¦ã„ã‚‹ç§ã«ã¯è§£æ±ºã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

> ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã—ãŸã‚‰ã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç”¨ã® Azure portal ã«ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¾ã™ã€‚ å¿…ãšã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã—ãŸã¨ãã¨åŒã˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚


> When the sandbox is activated, sign into the Azure portal for sandbox. Make sure to use the same account you activated the sandbox with.

ã“ã®æ‰‹é †ã§ã€Œã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç”¨ã® Azure portal ã«ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã€ã—ãŸã‚ã¨ã«ä½•ã‹somethingã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã¯ãªã„ã‹ã¨ãŠã‚‚ã„ã¾ã™ãŒã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

## ã‚¨ãƒ©ãƒ¼
ã“ã‚“ãªã‚¨ãƒ©ãƒ¼ã§ã™ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2021-11-10 20.56.10.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/7d31bcc8-1a77-4f89-b10b-13a4e2f856c0.png)

èµ¤ã„æ–‡å­—ãŒæ€–ã„ã€‚
ã¨ã«ã‹ãè²¼ã£ã¦ãŠãã¾ã™ã€‚

```
torifuku_kaiou@Azure:~$ export RESOURCE_GROUP=learn-f2e5c9f0-7772-4a45-ae69-2de97f79cf04
torifuku_kaiou@Azure:~$ export CLUSTER_NAME=aks-contoso-video
torifuku_kaiou@Azure:~$ az aks create \
>     --resource-group $RESOURCE_GROUP \
>     --name $CLUSTER_NAME \
>     --node-count 2 \
>     --enable-addons http_application_routing\
>     --generate-ssh-keys \
>     --node-vm-size Standard_B2s \
>     --network-plugin azure
(RequestDisallowedByPolicy) Provisioning of resource(s) for container service aks-contoso-video in resource group learn-f2e5c9f0-7772-4a45-ae69-2de97f79cf04 failed. Message: Resource 'aks-nodepool1-37735957-vmss' was disallowed by policy. Policy identifiers: '[{"policyAssignment":{"name":"containers-assignment","id":"/providers/Microsoft.Management/managementGroups/eab64c3d-95b6-9f1f-755f-9f8578c31e45/providers/Microsoft.Authorization/policyAssignments/containers-assignment"},"policyDefinition":{"name":"Allowedresource types","id":"/providers/Microsoft.Authorization/policyDefinitions/a08ec900-254a-4555-9bf5-e42af04b5c5c"},"policySetDefinition":{"name":"containers-initiative","id":"/providers/Microsoft.Management/managementGroups/learn-sandbox-prod/providers/Microsoft.Authorization/policySetDefinitions/containers-initiative"},"policyDefinitionReferenceId":"allowed-resource-types_1"}]'.. Details:
Code: RequestDisallowedByPolicy
Message: Provisioning of resource(s) for container service aks-contoso-video in resource group learn-f2e5c9f0-7772-4a45-ae69-2de97f79cf04 failed. Message: Resource 'aks-nodepool1-37735957-vmss' was disallowed by policy. Policy identifiers: '[{"policyAssignment":{"name":"containers-assignment","id":"/providers/Microsoft.Management/managementGroups/eab64c3d-95b6-9f1f-755f-9f8578c31e45/providers/Microsoft.Authorization/policyAssignments/containers-assignment"},"policyDefinition":{"name":"Allowed resource types","id":"/providers/Microsoft.Authorization/policyDefinitions/a08ec900-254a-4555-9bf5-e42af04b5c5c"},"policySetDefinition":{"name":"containers-initiative","id":"/providers/Microsoft.Management/managementGroups/learn-sandbox-prod/providers/Microsoft.Authorization/policySetDefinitions/containers-initiative"},"policyDefinitionReferenceId":"allowed-resource-types_1"}]'.. Details:
```

ã•ã™ãŒã«ã“ã“ã§è¾ã‚ã¡ã‚ƒã†ã®ã¯ã¯ã‚„ã™ãã‚‹ã—ã€ãã†ã ã€ç§ã¯[Kubernetes](https://kubernetes.io/ja/)åˆå¿ƒè€…ã§ã™ã€‚[^1]
ã¾ã ç§ã«ã¯[Azure Kubernetes Service(AKS)](https://azure.microsoft.com/ja-jp/services/kubernetes-service/#overview)ã¯æ—©ã‹ã£ãŸã‚ˆã†ã§ã™ã€‚
ã¾ãšã¯[Kubernetes](https://kubernetes.io/ja/)ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ã§ã‚¤ã‚´ã‹ã™[^2]ã¨ã“ã‚ã‹ã‚‰ã‚„ã£ã¦ã¿ã‚ˆã†:rocket::rocket::rocket:

[^2]: å‹•ã‹ã™ã®æ„ã€‚ãŸã¶ã‚“è¥¿æ—¥æœ¬ã®æ–¹è¨€ã€ãŠãã‚‰ãã€‚[NervesJP](https://nerves-jp.connpass.com/)ã§ã¯ãŠãªã˜ã¿ã®è¡¨ç¾ã€‚

æ¬¡ã«ãªã«ã‚’ã‚„ã‚ã†ã‹ã—ã‚‰ã€‚
ãã‚“ãªã¨ãã«ã‚‚<font color="purple">$\huge{MS\ Learn}$</font>:bangbang:

# [.NET ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’ Kubernetes ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/)
çµè«–ã‹ã‚‰ç”³ã—ã¾ã™ã¨ã€æœ€å¾Œã¾ã§è¡Œã‘ã¾ã—ãŸã€‚
ãŸã ã€2021å¹´11æœˆ10æ—¥ç¾åœ¨ã€æ—¥æœ¬èªè¨³ã«ã¯ã„ãã¤ã‹èª¤ã‚ŠãŒã‚ã‚Šã¾ã™ã€‚
ãã“ã¯ã€å¿…æ®ºæŠ€ã®<font color="purple">$\huge{è‹±èªã§èª­ã‚€}$</font>ãƒªãƒ³ã‚¯ã‚’æŠ¼ã—ã¦ã€è‹±èªã®ãƒšãƒ¼ã‚¸ã‚’èª­ã‚“ã§è‹±èªã¯è‹±èªã®ã¾ã¾ç†è§£ã™ã‚‹ã“ã¨ã‚’å¿ƒãŒã‘ã¦ã„ã‚‹ç§ã¯è§£æ±ºã§ãã¾ã—ãŸã€‚

ã“ã®Learnã§ã¯ä»¥ä¸‹ã‚’å­¦ã¹ã¾ã™ã€‚

- æ—¢ã«ã‚³ãƒ³ãƒ†ãƒŠãƒ¼åŒ–ã•ã‚ŒãŸãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«åˆ†å‰²ã•ã‚Œã¦ã„ã‚‹ .NET ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã€Kubernetes ç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•
- Docker Hub ã« Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã€Kubernetes ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚ˆã£ã¦ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã‹ã‚‰ã€Kubernetes ãŒå„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã—ã¦å®Ÿè¡Œã™ã‚‹å†…å®¹ã‚’å®£è¨€çš„ã«è¨˜è¿°ã™ã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
- Kubernetes ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠãƒ¼åŒ–ã•ã‚ŒãŸãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã„ã‹ã«ç°¡å˜ã‹ã‚’ä½“é¨“

ã‚‚ã¡ã‚ã‚“èª¤ã‚ŠãŒã‚ã£ãŸã¨ã“ã‚ã¯ã¡ã‚ƒã€œã‚“ã¨ã€å•é¡Œã‚’å ±å‘Šã—ã¦ãŠãã¾ã—ãŸã€‚

## [ã¯ã˜ã‚ã«](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/1-introduction)

> ã‚ãªãŸã¯ã€ä¸–ç•Œã§æœ€ã‚‚äººæ°—ã®ã‚ã‚‹ãƒ”ã‚¶åº—ã§ã‚ã‚‹ Contoso Pizza ã§ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºè€…ã¨ã—ã¦æ–°ã—ã„ä»•äº‹ã‚’å§‹ã‚ãŸã¨ã—ã¾ã™ã€‚ ãƒ“ã‚¸ãƒã‚¹ãŒå¥½èª¿ãªã®ã§ã€æœ€è¿‘ã€ãƒ”ã‚¶ã®åœ¨åº«ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’è¡¨ç¤ºã™ã‚‹ Contoso Pizza ã® Web ã‚µã‚¤ãƒˆã¯ Docker ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã§ãƒ›ã‚¹ãƒˆã•ã‚Œã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã•ã‚Œã¾ã—ãŸã€‚

:pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza:

## [ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ã¯](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/2-what-are-orchestrators)

èª¬æ˜ã‚’**å‘³èª­**:pizza:ã—ã¾ã—ãŸã€‚
ã¨ã¦ã‚‚ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«å¤§äº‹ãªã“ã¨ãŒã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚
ç§ã¿ãŸã„ãª[Kubernetes](https://kubernetes.io/ja/)åˆå¿ƒè€…ã¯ã¾ãšã“ã“ã‚’ã‚ˆãèª­ã‚€ã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹ã¨ã‚ˆã„ã¨ãŠã‚‚ã„ã¾ã™ã€‚[^3]
ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚
ãƒãƒ‚ãŠã™ã™ã‚ã§ã™ã€‚

[^3]: ä¸€ä½“ã€ä½•ç›®ç·šãªã®ã§ã—ã‚‡ã†ã€‚

## [æ¼”ç¿’ - ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ Docker Hub ã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/3-exercise-push-to-docker-hub)
Docker Hubã¸ã®Pushã¯çµŒé¨“ãŒã‚ã‚Šã¾ã™ã€‚

æ—¥æœ¬èªè¨³ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™ã€‚ãŸã„ã—ãŸå•é¡Œã§ã¯ãªã„ã§ã™ã€‚

## å•é¡Œå ±å‘Š
ã¡ã‚ƒã€œã‚“ã¨ã€å•é¡Œã‚’å ±å‘Šã—ã¦ãŠãã¾ã—ãŸã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2021-11-10 17.28.45.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/cd5bc53b-8d96-f4d6-b157-9b4c8833d496.png)

## [ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã‚’ Kubernetes ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/4-exercise-deploy-to-kubernetes)

ã“ã“ãŒé›£é–¢ã§ã—ãŸã€‚
æ—¥æœ¬èªè¨³ã‚’ãã®ã¾ã¾å†™ã™ã¨ã€ã ã£ã¦ã“ã‚“ãªç”»é¢ã§ã™ã‚ˆ :sob:

```bash
$ kubectl apply -f backend-deploy.yml

$ kubectl apply -f frontend-deploy.yml
```

ã¨ã€é¦´æŸ“ã¿ã®ãªã„ã‚³ãƒãƒ³ãƒ‰ã‚’æ„å‘³ã‚’ã‚ã‹ã‚‰ãšã«æ‰“ã£ãŸã‚ã¨ã®ç”»é¢ãŒã“ã‚Œâ†“â†“â†“

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2021-11-10 19.21.37.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/091bd7a6-cda3-eee9-d1e1-4428d9d6c31f.png)

å›°ã£ãŸã¨ãã¯ã€å¿…æ®ºæŠ€ã®<font color="purple">$\huge{è‹±èªã§èª­ã‚€}$</font>ãƒªãƒ³ã‚¯ã‚’æŠ¼ã—ã¦ã€è‹±èªã®ãƒšãƒ¼ã‚¸ã‚’èª­ã‚“ã§è‹±èªã¯è‹±èªã®ã¾ã¾ç†è§£ã™ã‚‹ã“ã¨ã‚’å¿ƒãŒã‘ã¦ã„ã‚‹ç§ã¯ã‚¤ã‚´ã‹ã™[^1]ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
`backend-deploy.yml`ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™ã€‚
ã‚‚ã¡ã‚ã‚“ã¡ã‚ƒã€œã‚“ã¨ã€å•é¡Œã‚’å ±å‘Šã—ã¦ãŠãã¾ã—ãŸã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2021-11-10 19.18.55.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/8e533d01-e3e2-f8d5-f85b-193934e6394f.png)

èª¤ã‚Šã‚’å«ã‚“ã§ã„ã‚‹backendã®æ­¢ã‚æ–¹ãŒã‚ã‹ã‚‰ãšå³å¾€å·¦å¾€ã—ã¾ã—ãŸã€‚
ã“ã‚“ãªæ„Ÿã˜ã§æ­¢ã‚ã¾ã—ãŸã€‚

```bash
$ kubectl get deployments --all-namespaces
NAMESPACE     NAME            READY   UP-TO-DATE   AVAILABLE   AGE
default       pizzabackend    1/1     1            1           99m
default       pizzafrontend   1/1     1            1           104m
kube-system   coredns         2/2     2            2           3h16m

$ kubectl delete -n default deployment pizzabackend

$ kubectl delete -n default deployment pizzafrontend
```

`pizzafrontend`ã¯ãã®ã¾ã¾ã§ã‚ˆã‹ã£ãŸã®ã‹ã‚‚ã€‚
æ°—ã‚’å–ã‚Šç›´ã—ã¦å†åº¦ã€

```bash
$ kubectl apply -f backend-deploy.yml

$ kubectl apply -f frontend-deploy.yml

$ kubectl get pods
NAME                            READY   STATUS    RESTARTS   AGE
pizzabackend-85fd76dd68-mt2wm   1/1     Running   0          20s
pizzafrontend-df9d577d5-s9thl   1/1     Running   0          6s
```


![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2021-11-10 19.22.40.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/06be7666-ac43-1791-fdb4-f99cfe970c65.png)

<font color="purple">$\huge{all\ right}$</font>
:pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza:
:tada::tada::tada::tada::tada::tada::tada::tada::tada::tada::tada:
:pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza:
:tada::tada::tada::tada::tada::tada::tada::tada::tada::tada::tada:

## [Kubernetes ã§ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/5-exercise-scale-microservice)

> ã‚ãªãŸã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€1 æ—¥ã®ã†ã¡ã®ç‰¹å®šã®æ™‚é–“å¸¯ã«å¤§ããªè² è·ãŒã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ Kubernetes ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€è¿½åŠ ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒè‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç°¡å˜ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¸ãˆã€œã€€ã£ã¦æ„Ÿã˜ã§è¨˜äº‹ã®é€šã‚Šã«ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã€ã‚¹ã‚±ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ãŒã§ãã¾ã—ãŸ :tada:

```bash
$ kubectl scale --replicas=5 deployment/pizzabackend

$ kubectl scale --replicas=1 deployment/pizzabackend
```

## [Kubernetes ã§ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®å›å¾©æ€§ã‚’è¨¼æ˜ã™ã‚‹](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/6-exercise-microservice-resilience)

```bash
$ kubectl delete pod pizzafrontend-5b6cc765c4-hjpx4
```

è¨˜äº‹ã®é€šã‚Šã«ã“ã‚“ãªæ„Ÿã˜ã§`delete`ã—ã¦ã‚‚ã€ã™ãã«åˆ¥ã®ãƒãƒƒãƒ‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒèµ·å‹•ã•ã‚Œã¾ã™ã€‚

```bash
$ kubectl get pods

NAME                             READY   STATUS    RESTARTS   AGE
pizzabackend-7445bdb5c9-pnpk6    1/1     Running   0          31m
pizzafrontend-5b6cc765c4-vwmv8   1/1     Running   0          7s
```

ã“ã†ã„ã†ã®ã¯ã©ã†ã‹ãªã£ã¦ã“ã¨ã§ã€è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
[Docker](https://www.docker.com/)ã«ã¯å¤šå°‘ã®å¿ƒå¾—ã¯ã”ã–ã‚‹ã€‚

```
$ docker ps
CONTAINER ID   IMAGE                         COMMAND                 CREATED         STATUS         PORTS     NAMES
a937d6e26641   torifukukaiou/pizzafrontend   "dotnet frontend.dll"   5 minutes ago   Up 5 minutes             k8s_pizzafrontend_pizzafrontend-df9d577d5-s9thl_default_e62d197d-9ddb-4f2b-a3c5-13482c57edf2_0
3b9ea4c77361   torifukukaiou/pizzabackend    "dotnet backend.dll"    5 minutes ago   Up 5 minutes             k8s_pizzabackend_pizzabackend-85fd76dd68-mt2wm_default_d6baca90-ea65-4544-92c2-b1654046c4be_0

$ docker stop a937d6e26641
a937d6e26641

$ kubectl get pods
NAME                            READY   STATUS    RESTARTS   AGE
pizzabackend-85fd76dd68-mt2wm   1/1     Running   0          7m6s
pizzafrontend-df9d577d5-s9thl   1/1     Running   1          6m52s
```

ã¾ãŸå¾©æ´»ã—ã¦ã„ã¾ã™ã€‚ç«‹ã¡ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚
ä¸æ­»èº«ã§ã™ã€‚
ä¸æ­»é³¥ã§ã™ã€‚
ã™ã°ã‚‰ã—ã„:pizza:

## [ã¾ã¨ã‚](https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/7-summary)

ãŒã‚“ã°ã‚Šã¾ã—ãŸ:pizza:



# ãŠã‚ã‚Šã« :tada::lgtm::lgtm::lgtm::lgtm::lgtm::tada:
<font color="purple">$\huge{MS\ Learnæœ€é«˜ã§ã™ğŸ‰}$</font>

https://docs.microsoft.com/ja-jp/learn/modules/dotnet-deploy-microservices-kubernetes/2-what-are-orchestrators

:pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza::pizza:
