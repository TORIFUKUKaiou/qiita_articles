---
title: '** ï¼ˆElixirï¼‰'
tags:
  - Elixir
  - 40ä»£é§†ã‘å‡ºã—ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
  - autoracex
  - AdventCalendar2022
private: false
updated_at: '2022-03-16T02:00:56+09:00'
id: 9d42a8635397896dae7b
organization_url_name: fukuokaex
slide: false
ignorePublish: false
---
**åã«ã—è² ã¯ã°é€¢å‚å±±ã®ã•ã­ã‹ã¥ã‚‰äººã«çŸ¥ã‚‰ã‚Œã§æ¥ã‚‹ã‚ˆã—ã‚‚ãŒãª**

Advent Calendar 2022 74æ—¥ç›®[^1]ã®è¨˜äº‹ã§ã™ã€‚
I'm looking forward to 12/25,2022 :santa::santa_tone1::santa_tone2::santa_tone3::santa_tone4::santa_tone5:
ç§ã®[Advent Calendar 2022 ä¸€è¦§](https://docs.google.com/spreadsheets/d/1HQvFjagQLRPjOYAjDVzWp9S4b8dKixxvvaz_TtbZWto/edit#gid=1723448955)ã€‚

[^1]: @kaizen_nagoya ã•ã‚“ã®ã€Œ[ã€Œ@e99h2121 ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã¯ã‚ã‚Šã¾ã™ã¾ã„ã‹ Advent Calendar 2020ã€ã®æ”¹è¨‚ç‰ˆã§ã¯ã‚ã‚Šã¾ã™ã¾ã„ã‹ Advent Calendar 2022 ï¼‘æ—¥ç›®ã€€Most Breakthrough Generator](https://qiita.com/kaizen_nagoya/items/49ebebee3a0377f3b59b)ã€ã‹ã‚‰ç€æƒ³ã‚’å¾—ã¦ã€æ¨¡å€£ã„ãŸã—ã¾ã—ãŸã€‚ 

---



# ã¯ã˜ã‚ã«

[Elixir](https://elixir-lang.org/)ã‚’æ¥½ã—ã‚“ã§ã„ã¾ã™ã‹:bangbang::bangbang::bangbang:

`**`ãŒã‚ã‚Šã¾ã—ãŸã€‚
[Elixir](https://elixir-lang.org/) 1.13 or laterã§ã™ã€‚
1.13ã‹ã‚‰è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

`**`ã®æ„å‘³ã¯ã‚‚ã¡ã‚ã‚“ã¹ãä¹—ã®è¨ˆç®—ã§ã™ã€‚
Power operatorã§ã™ã€‚

`base ** e`ã¯ã€

$base^e$

ã§ã™ã€‚

# å®Ÿè¡Œ

```elixir
iex> 2 ** 3
8

iex> 2 ** 0
1
```

# å†…éƒ¨å®Ÿè£…

https://github.com/elixir-lang/elixir/blob/v1.13.3/lib/elixir/lib/kernel.ex#L4108-L4151

`base`ã€`exponent`ã¨ã‚‚ã«æ•´æ•°ã§ã‚ã‚‹å ´åˆã®å®Ÿè£…ã‚’æŠœãå‡ºã—ã¦ã¿ã¾ã™ã€‚


```elixir:lib/elixir/lib/kernel.ex
  def base ** exponent when is_integer(base) and is_integer(exponent) and exponent >= 0 do
    integer_pow(base, 1, exponent)
  end

  # https://en.wikipedia.org/wiki/Exponentiation_by_squaring
  defp integer_pow(_, _, 0),
    do: 1

  defp integer_pow(b, a, 1),
    do: b * a

  defp integer_pow(b, a, e) when :erlang.band(e, 1) == 0,
    do: integer_pow(b * b, a, :erlang.bsr(e, 1))

  defp integer_pow(b, a, e),
    do: integer_pow(b * b, a * b, :erlang.bsr(e, 1))
```

https://en.wikipedia.org/wiki/Exponentiation_by_squaring

è©³ã—ã„èª¬æ˜ã¯çœãã¾ã™ã€‚

- [Exponentiation by squaring](https://en.wikipedia.org/wiki/Exponentiation_by_squaring)ã«å¾“ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™
- ãƒ“ãƒƒãƒˆæ¼”ç®—ã‚’å·§ã¿ã«ã¤ã‹ã£ã¦è¨ˆç®—é‡ã‚’æ¸›ã‚‰ã—ã¦ã„ã¾ã™
- `:erlang.band`ã¯ã€[Bitwise AND](https://www.erlang.org/doc/reference_manual/expressions.html#arithmetic-expressions) ã§ã™
- `:erlang.bsr`ã¯ã€[Bitshift right](https://www.erlang.org/doc/reference_manual/expressions.html#arithmetic-expressions)ã§ã™


$2^3$ã¨$2^2$ã‚’ç´™ã«æ›¸ã„ã¦ã©ã†å®Ÿè¡Œã•ã‚Œã‚‹ã®ã‹ã‚’æ›¸ãå‡ºã—ã¦ã¿ã‚‹ã¨ã€ãªã‚“ã¨ãªãã¿ãˆã¦ãã‚‹ã¨ãŠã‚‚ã„ã¾ã™ã€‚

ã¡ãªã¿ã«ã€`2 ** 4.0`ã¨ã„ã£ãŸã‚ˆã†ã«æ•´æ•°ä»¥å¤–ã‚’å«ã‚“ã§ä½¿ç”¨ã—ãŸå ´åˆã¯ã€ [:math.pow/2](https://www.erlang.org/doc/man/math.html#pow-2) ãŒå‘¼ã³å‡ºã•ã‚Œã¦ã„ã¾ã™ã€‚

---

# Wrapping up :lgtm::lgtm::lgtm::lgtm::lgtm:

ã“ã®è¨˜äº‹ã¯ã€[Elixir](https://elixir-lang.org/) 1.13ã§è¿½åŠ ã•ã‚ŒãŸ`**`ï¼ˆPower operatorï¼‰ã«ã¤ã„ã¦èª¬æ˜ã‚’ã—ã¾ã—ãŸã€‚


Enjoy [Elixir](https://elixir-lang.org/):bangbang::bangbang::bangbang:
<font color="purple">$\huge{Enjoy\ ElixirğŸš€}$</font>


ä»¥ä¸Šã§ã™ã€‚





---

I organize [autoracex](https://autoracex.connpass.com/).
And I take part in [NervesJP](https://nerves-jp.connpass.com/), [fukuoka.ex](https://fukuokaex.connpass.com/), [EDI](https://fukuokaex.connpass.com/), [tokyo.ex](https://beam-lang.connpass.com/), [Pelemay](https://pelemay.connpass.com/).
I hope someday you'll join us.

[We Are The Alchemists, my friends!](https://www.youtube.com/watch?v=04854XqcfCY)





