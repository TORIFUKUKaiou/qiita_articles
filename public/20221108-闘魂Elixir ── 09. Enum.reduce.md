---
title: é—˜é­‚Elixir â”€â”€ 09. Enum.reduce
tags:
  - Elixir
  - çŒªæœ¨
  - 40ä»£é§†ã‘å‡ºã—ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
  - AdventCalendar2022
  - é—˜é­‚
private: false
updated_at: '2022-12-18T17:46:03+09:00'
id: a02a3a599d1959dd80f2
organization_url_name: fukuokaex
slide: false
---
<b><font color="red">$\huge{å…ƒæ°£ã§ã™ã‹ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒƒï¼ï¼ï¼}$</font></b>

https://qiita.com/advent-calendar/2022

https://qiita.com/advent-calendar/2022/elixir

# ã¯ã˜ã‚ã«

é—˜é­‚ã¨[Elixir](https://elixir-lang.org/)ãŒå‡ºä¼šã„ã¾ã—ãŸã€‚
é—˜é­‚ meets [Elixir](https://elixir-lang.org/).ã§ã™ã€‚
[Elixir](https://elixir-lang.org/) meets é—˜é­‚.ã§ã‚‚ã‚ˆã„ã§ã™ã€‚

æœ¬æ—¥ã¯ã€[Enum.reduce/3](https://hexdocs.pm/elixir/Enum.html#reduce/3)ã‚’èª¬æ˜ã—ã¾ã™ã€‚

```elixir
iex> "Elixir" |> String.graphemes() |> Enum.frequencies()
%{"E" => 1, "i" => 2, "l" => 1, "r" => 1, "x" => 1}
```

# [Enum.reduce/3](https://hexdocs.pm/elixir/Enum.html#reduce/3)

å°‚é–€ç”¨èªã§è¨€ã†ã¨ã€ã€Œç•³è¾¼ã¿ã€ã§ã™ã€‚
å°‚é–€å®¶ã£ã½ããªã‚ŠãŸã„ã ã‘ãªã‚‰ã€Œreduceã€ã‚ã£ç•³è¾¼ã¿ã­ã€ã¨è¨€ã£ã¦ãŠã‘ã°ã„ã„ã§ã™ã€‚
å°‚é–€å®¶ã«ãªã‚ŠãŸã‘ã‚Œã°ãã®æ„å‘³ã™ã‚‹ã“ã¨ã‚’ã—ã£ã‹ã‚Šã¨ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã€Œé–¢æ•°å‹ã®é¬¼é–€ã§ã™ã€ã¨è„…ã—ã‚’ã„ã‚ŒãªãŒã‚‰ã€ **å…ƒæ°£ãŒã‚ã‚Œã°ãªã‚“ã§ã‚‚ã§ãã‚‹ï¼** ã§ã™ã€‚
å‘ä¸Šã®æ„æ°—ã€å¤©ã‚’è¡ãã®ã§ã‚ã‚Šã¾ã™ã€‚

Enumerableãªã‚‚ã®ã®è¦ç´ ã²ã¨ã¤ã²ã¨ã¤ã«é–¢æ•°ã‚’é©ç”¨ã—ã¦ã€ã‚ã‚‹å½¢ã«ã¾ã¨ã‚ã¦è¡Œãã¾ã™ã€‚
ã€ŒEnumerableãªã‚‚ã®ã€ãŒã¯ã¦ãªï¼Ÿã€€ã®æ–¹ã¯ã€ã€Œ[é—˜é­‚Elixir â”€â”€ 06. Enumãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](https://qiita.com/torifukukaiou/items/bb9d43cde4d667cddb30)ã€ã‚’æŒ¯ã‚Šè¿”ã£ã¦ãã ã•ã„ã¾ã›ã€‚


è¨€è‘‰ã«ã™ã‚‹ã¨ãªã‚“ã ã‹é›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã“ã¡ã‚‰ã®å›³ã‚’ã¿ã¦ãã ã•ã„ã€‚

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/b388fe84-de09-1f62-111a-f04f21bbbfe0.png)




ä¸Šå›³ã®èª¬æ˜ã‚’ã—ã¾ã™ã€‚[^1]
ãªã‹ãªã‹è¤‡é›‘ã§ã™ã­ã€‚çµµãŒå°ã•ã„ã—ã”ã¡ã‚ƒã”ã¡ã‚ƒã—ã¦ã„ã¾ã™ã­ã€‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦æ‹¡å¤§ã—ã¦è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚
`[:cat, :dog, :dog, :dog, :cat, :bird]`ãŒInputã§ã™ã€‚
çµè«–ã‚’å…ˆã«ã„ã†ã¨ã€ãƒªã‚¹ãƒˆã®ä¸­ã«å«ã¾ã‚Œã¦ã„ã‚‹ã‚¢ãƒˆãƒ ã®æ•°ã‚’æ•°ãˆä¸Šã’ã¦ã„ã¾ã™ã€‚
è¦ç´ 1å€‹ãšã¤ã«é–¢æ•°`f`ã‚’é©ç”¨ã—ã¦ã„ã¾ã™ã€‚`acc`ã®åˆæœŸå€¤ã¯ã€ç©ºã®Map`%{}`ã§ã™ã€‚
é–¢æ•°`f`ã®å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®è¦ç´ ã«é–¢æ•°`f`ã‚’é©ç”¨ã™ã‚‹ã¨ãã®`acc`ã¨ãªã‚Šã¾ã™ã€‚
[Map.update/4](https://hexdocs.pm/elixir/Map.html#update/4)ã¯ã€ç¬¬1å¼•æ•°ã®Mapã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ã§ã™ã€‚ç¬¬1å¼•æ•°ãŒMapã§ã€ç¬¬ï¼’å¼•æ•°ãŒã‚­ãƒ¼ã€ç¬¬3å¼•æ•°ãŒå€¤ã§ã™ã€‚ã‚‚ã—ã‚­ãƒ¼ãŒã™ã§ã«Mapã«å«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã«ã¯ã€ç¬¬4å¼•æ•°ã«æŒ‡å®šã—ãŸé–¢æ•°ã«å¾“ã£ã¦å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚ã“ã®é–¢æ•°ã®å¼•æ•°ã¯ã€ç¾åœ¨ã®å€¤ã§ã™ã€‚`fn cnt -> cnt + 1 end`ã¨ã—ã¦ãŠã‚Šã¾ã™ã®ã§ã€ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã„ã‚‹ã‚ã‘ã§ã™ã€‚

ã©ã†ã§ã—ã‚‡ã†ã‹ã€ä¼ã‚ã‚Šã¾ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚
[Enum.reduce/3](https://hexdocs.pm/elixir/Enum.html#reduce/3)ã¯ã€[Elixir](https://elixir-lang.org/)ã‚’ä¸€äººå‰ã«ãªã‚‹ã¨ãã«é¿ã‘ã¦ã¯é€šã‚Œãªã„é–¢æ•°ã§ã™ã€‚


[^1]: å›³ã¯ã€https://excalidraw.com/ ã‚’ä½¿ã£ã¦ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã‚¹ã‚´è…•ãƒãƒƒã‚«ãƒ¼ãŒæ›¸ã„ãŸã‹ã®ã‚ˆã†ãªæ‰‹æ›¸ãé¢¨ã®çµµãŒæ›¸ã‘ã‚‹ã®ã§æœ€è¿‘ã®ç§ã®ãŠæ°—ã«å…¥ã‚Šãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

[IEx](https://hexdocs.pm/iex/IEx.html)ã§ç¢ºã‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```:CMD
iex
```

[IEx](https://hexdocs.pm/iex/IEx.html)ãŒç«‹ã¡ä¸ŠãŒã£ãŸã‚‰ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„ã€‚

```elixir
iex> f = fn v, acc -> Map.update(acc, v, 1, fn cnt -> cnt + 1 end) end

iex> Enum.reduce([:cat, :dog, :dog, :dog, :cat, :bird], %{}, f)
%{bird: 1, cat: 2, dog: 3}
```

`[:cat, :dog, :dog, :dog, :cat, :bird]` => `%{bird: 1, cat: 2, dog: 3}`ã®å¤‰æ›ãŒã§ãã¾ã—ãŸ:tada::tada::tada::tada::tada:


# ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆãƒ¬ãƒƒã‚¹ãƒ³

`f`é–¢æ•°ã¯ä½¿ã‚ãªãã¦ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```elixir
Enum.reduce([:cat, :dog, :dog, :dog, :cat, :bird], %{}, fn v, acc -> Map.update(acc, v, 1, & &1 + 1) end)
```

ã¾ãŸã€ä»Šå›ã®ä¾‹ã¯[Enum.frequencies/1](https://hexdocs.pm/elixir/Enum.html#frequencies/1)ã‚’ä½¿ã†ã¨åŒã˜ã“ã¨ãŒã§ãã¾ã™ã€‚

```elixir
Enum.frequencies([:cat, :dog, :dog, :dog, :cat, :bird])   
%{bird: 1, cat: 2, dog: 3}
```


# ä»Šæ—¥ã®<font color="#d00080">é—˜é­‚</font>

ä»Šæ—¥ã¯ã€ã€å­Ÿå­ã€ã‹ã‚‰è¨€è‘‰ã‚’å¼•ãã¾ã™ã€‚

---
<ruby>æµ©ç„¶ä¹‹æ°£<rt>ã“ã†ãœã‚“ã®ã</rt></ruby>
---

è§£èª¬ã¯ã€[ã“ã¡ã‚‰](https://imidas.jp/fourchars/detail/X-01-S-10-1-0030.html)ã‚’ã”å‚ç…§ãã ã•ã„ã€‚
çŒªæœ¨ã•ã‚“æµã«è¨€ã†ã¨ã€ã€Œ**ã™ã¹ã¦ã¯ã€ç ‚æ¼ ã«éºã—ãŸè¶³è·¡ã€‚é¢¨ãŒå¹ã„ãŸã‚‰æ¶ˆãˆå»ã‚‹ã ã‘ãƒ¼ãƒ¼**ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚
:book:ã€[ã‚¢ãƒ³ãƒˆãƒ‹ã‚ªçŒªæœ¨è‡ªä¼](https://presidentstore.jp/item/008105.html)ã€:book:ã‹ã‚‰å¼•ãã¾ã—ãŸã€‚

çŒªæœ¨ã•ã‚“ã‚’è£åˆ‡ã£ãŸç›¸æ‰‹ã‚’èºŠèº‡ãªããƒªãƒ³ã‚°ã«ä¸Šã’ã¾ã—ãŸã€‚
ã§ã£ã‹ã„å¿ƒã§ã™ã¹ã¦ã‚’åŒ…ã¿è¾¼ã¿ã¾ã—ã‚‡ã†ã€‚å®‡å®™ã‹ã‚‰çœºã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãŸã„ã¦ã„ã®äººé–“é–¢ä¿‚ã¯ã¡ã£ã½ã‘ãªã‚‚ã®ã§ã™ã€‚

> ã‚ãŸã—ã¯ã€ã™ã¹ã¦ã®éå»ã‚’æ ¹ã«æŒãŸãªã„ã‹ã‚‰ã ã€‚
> (ä¸­ç•¥)éå»ã‚’æ¨ã¦å»ã‚‹å‹‡æ°—ã‚‚äººç”Ÿã«ãŠã„ã¦ã¯å¤§åˆ‡ãªã®ã ã€‚

ã¿ãªã•ã¾ã‚‚ãœã²ã“ã®æœ¬ã‚’ãŠæ‰‹ã«ã¨ã‚‰ã‚Œã¦ã€çŒªæœ¨ã•ã‚“ãŒæ®‹ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šã˜ã¦ã€ç›´æ¥çŒªæœ¨ã•ã‚“ã‹ã‚‰ã€Œå…ƒæ°£ã€ã‚’ã‚‚ã‚‰ã£ã¦ãã ã•ã„ã€‚

https://www.shinchosha.co.jp/book/129721/

https://presidentstore.jp/item/008105.html

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/be8933f5-e3e2-d5f4-1561-f65f75abdf38.png)


# ã•ã„ã”ã«

[Enum.reduce/3](https://hexdocs.pm/elixir/Enum.html#reduce/3)ã‚’èª¬æ˜ã—ã¾ã—ãŸã€‚

é—˜é­‚ã®æ„å‘³ã¯ã€ **ã€Œå·±ã«æ‰“ã¡å…‹ã¡ã€é—˜ã„ã‚’é€šã˜ã¦å·±ã®é­‚ã‚’ç£¨ã„ã¦ã„ãã“ã¨ã§ã‚ã‚‹ã€** ã¨ã®çŒªæœ¨ã•ã‚“ã®è¨€è‘‰ã‚’ãã®ã¾ã¾èƒ¸ã«åˆ»ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚
çŸ¥ã£ã¦ã„ã‚‹ã ã‘ã§çµ‚ã‚ã‚‰ã›ã‚‹ã“ã¨ãªãã€å®Ÿè¡Œã™ã‚‹ã€æ–­è¡Œã™ã‚‹ã€ä¸€æ­©ã‚’è¸ã¿å‡ºã™ã“ã¨ã‚’è‡ªã‚‰ã®è¡Œå‹•ã§ç¤ºã—ã¦ã„ããŸã„ã¨ãŠã‚‚ã„ã¾ã™ã€‚

<font color="red">$\huge{ï¼‘ã€ï¼’ã€ï¼“ ãã£ãƒ€ãƒ¼ï¼}$</font>


<iframe width="910" height="512" src="https://www.youtube.com/embed/AWxwmqzbOaw" title="ç‡ƒãˆã‚‹é—˜é­‚ ã‚¢ãƒ³ãƒˆãƒ‹ã‚ªçŒªæœ¨  è¿½æ‚¼VTR" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

https://www.youtube.com/watch?v=FSz7N5hCltw

---

https://qiita.com/torifukukaiou/items/5e96f4e9f12ec3c4b3f4

---

# Twitter

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">Elixir Advent Calendar 3ã®9æ—¥ç›®ã¯ã€æ¯åº¦ãŠé¦´æŸ“ã¿ <a href="https://twitter.com/torifukukaiou?ref_src=twsrc%5Etfw">@torifukukaiou</a> ã•ã‚“ã‹ã‚‰ã€ä»Šå›ã¯é–¢æ•°å‹ã®é¬¼é–€ã§ã‚ã‚‹ã€Œç•³è¾¼ã¿ã€é–¢æ•°ã®Elixirãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€Enum .reduceã§ã™ğŸ˜œ<a href="https://t.co/TLcJwLnOJw">https://t.co/TLcJwLnOJw</a><br><br>ã€Œç•³è¾¼ã¿ã€ã¯ã€è¨€è‘‰ã«ã™ã‚‹ã¨ãªã‚“ã ã‹é›£ã—ã„ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€Elixirã§ä¸€äººå‰ã«ãªã‚‹ã¨ãé¿ã‘ã¦ã¯é€šã‚Œãªã„é–¢æ•°ğŸ˜Œ <a href="https://t.co/sV39TKe4IU">pic.twitter.com/sV39TKe4IU</a></p>&mdash; piacere (love Elixir, Gravity and VR/AR/Metaverse) (@piacere_ex) <a href="https://twitter.com/piacere_ex/status/1601054315380363264?ref_src=twsrc%5Etfw">December 9, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

---

<b><font color="red">$\huge{å…ƒæ°£ãŒã‚ã‚Œã°ãªã‚“ã§ã‚‚ã§ãã‚‹ï¼}$</font></b>
