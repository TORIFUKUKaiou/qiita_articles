---
title: Nerves.Runtime.revert ã‚’æ¥½ã—ã‚“ã§ã¿ã‚‹ (Elixir)
tags:
  - Elixir
  - Nerves
  - 40ä»£é§†ã‘å‡ºã—ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
  - autoracex
  - AdventCalendar2022
private: false
updated_at: '2022-01-30T11:39:00+09:00'
id: 809bac6d3445403aec5f
organization_url_name: fukuokaex
slide: false
---
https://qiita.com/official-events/5cb794f7cb9ac194ed70

**çŸ¥è¡Œåˆä¸€**

Advent Calendar 2022 29æ—¥ç›®[^1]ã®è¨˜äº‹ã§ã™ã€‚
I'm ready for 12/25,2022 :santa::santa_tone1::santa_tone2::santa_tone3::santa_tone4::santa_tone5:
I'm looking forward to 12/25,2022 :santa::santa_tone1::santa_tone2::santa_tone3::santa_tone4::santa_tone5:
I can't wait for 12/25,2022 :santa::santa_tone1::santa_tone2::santa_tone3::santa_tone4::santa_tone5:
ç§ã®[Advent Calendar 2022 ä¸€è¦§](https://docs.google.com/spreadsheets/d/1HQvFjagQLRPjOYAjDVzWp9S4b8dKixxvvaz_TtbZWto/edit#gid=1723448955)ã€‚

[^1]: @kaizen_nagoya ã•ã‚“ã®ã€Œ[ã€Œ@e99h2121 ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã¯ã‚ã‚Šã¾ã™ã¾ã„ã‹ Advent Calendar 2020ã€ã®æ”¹è¨‚ç‰ˆã§ã¯ã‚ã‚Šã¾ã™ã¾ã„ã‹ Advent Calendar 2022 ï¼‘æ—¥ç›®ã€€Most Breakthrough Generator](https://qiita.com/kaizen_nagoya/items/49ebebee3a0377f3b59b)ã€ã‹ã‚‰ç€æƒ³ã‚’å¾—ã¦ã€æ¨¡å€£ã„ãŸã—ã¾ã—ãŸã€‚ 

---



# ã¯ã˜ã‚ã«

[Elixir](https://elixir-lang.org/)ã‚’æ¥½ã—ã‚“ã§ã„ã¾ã™ã‹:bangbang::bangbang::bangbang:


<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Nerves Tip #18 - Revert to the previously loaded firmware<br><br>Run `Nerves.Runtime.revert` to go back to the previously loaded firmware.<a href="https://twitter.com/hashtag/NervesTips?src=hash&amp;ref_src=twsrc%5Etfw">#NervesTips</a> <a href="https://twitter.com/hashtag/MyElixirStatus?src=hash&amp;ref_src=twsrc%5Etfw">#MyElixirStatus</a></p>&mdash; Jon Jon (@JonCarstens) <a href="https://twitter.com/JonCarstens/status/1487093114858876937?ref_src=twsrc%5Etfw">January 28, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

[Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1)ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚

[Nerves](https://www.nerves-project.org/)ã‚’ã‚„ã£ãŸã“ã¨ãŒã‚ã‚‹æ–¹ã«å‘ã‘ã¦æ›¸ã„ã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹ãã‚‰ã„ã®çŸ¥è­˜ã§å¤§ä¸ˆå¤«ã§ã™ã€‚

```
$ mix local.hex
$ mix local.rebar
$ mix archive.install hex nerves_bootstrap
$ mix nerves.new hello_nerves
$ cd hello_nerves
$ export MIX_TARGET=rpi4
$ mix deps.get
$ mix firmware
$ mix burn
```

# [Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1)

[Nerves](https://www.nerves-project.org/)ã«ã¯ã€Aé¢ã¨Bé¢ãŒã‚ã‚Šã¾ã—ã¦2ã¤ã®ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’æ›¸ãè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚
ã©ã¡ã‚‰ã‹ä¸€æ–¹ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚Šã¾ã™ã€‚
ãµã¤ã†ã¯OTA(Over the Air)ã§ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’æ›¸ãæ›ãˆãŸã¨ãã«ã€è‡ªå‹•ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–é¢ãŒåˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚
[Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1)ã‚’ä½¿ã†ã“ã¨ã§ã€ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªé¢ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
[Jon Jon](https://twitter.com/JonCarstens/)ã•ã‚“ã®[ãƒ„ã‚¤ãƒ¼ãƒˆ](https://twitter.com/JonCarstens/status/1487093114858876937)ã§ç§ã¯ã¯ã˜ã‚ã¦çŸ¥ã‚Šã¾ã—ãŸã€‚


# å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã‚‹ :rocket::rocket::rocket:

[Nerves Livebook](https://github.com/livebook-dev/nerves_livebook)ã‚’ä½¿ã„ã¾ã™ã€‚
ä»¥ä¸‹ã«äºˆã‚ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ãŒã‚ã‚Šã¾ã™ã€‚

https://github.com/livebook-dev/nerves_livebook/releases

ç§ã¯ã€`nerves_livebook_rpi4.fw`ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ä½¿ã„ã¾ã—ãŸã€‚
[v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã¨[v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)ã‚’ç„¼ã„ã¦ã¿ã¾ã™ã€‚

ä»¥ä¸‹ã®æ‰‹é †ã§ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚

1. `fwup`ã§ã€[Nerves Livebook](https://github.com/livebook-dev/nerves_livebook)ã®[v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã‚’ç„¼ã
1. `./upload.sh`ã§ã€[Nerves Livebook](https://github.com/livebook-dev/nerves_livebook)ã®[v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)
1. [Nerves Livebook](https://github.com/livebook-dev/nerves_livebook)ã®[v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)ã§ã‚°ãƒ©ãƒ•ãŒå‹•ã‹ãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹
1. [Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1) ã§Bé¢ã®[v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
1. [v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã®ãŸã‚ã€ã‚°ãƒ©ãƒ•è¡¨ç¤ºãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹


ã¡ãªã¿ã«

- [v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)ã¯ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã§ããªã„ä¸å…·åˆãŒã‚ã‚Šã¾ã™
- [v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã§è§£æ¶ˆã—ã¦ã„ã¾ã™

ãªã«ã‚’éš ãã†ã€ç§ãŒ[Issue](https://github.com/livebook-dev/nerves_livebook/issues/156)ã‚’æ›¸ã„ã¦ã€ @mnishiguchi ã•ã‚“ãŒè¿½è©¦ã¨è§£æã‚’ã—ã¦ãã‚Œã¦ã€[v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã§è§£æ±ºã—ã¦ã„ã¾ã™ã€‚
<font color="purple">$\huge{ãã®ä¸€æ­©ã¯æˆ‘ã€…äººé¡ã«ã¨ã£ã¦å¤§ããªé€²æ’ƒã«ãªã‚‹ï¼ï¼}$</font>

ãƒãƒ³ãƒ‰ãƒ¡ãƒ³ãƒã‚’ç´¹ä»‹ã—ã¾ã™ã€œ

![Screen Shot 2022-01-25 at 7.37.33 AM.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/7de9421f-338c-9eb5-e8c3-2ee12a6ac495.png)

ãªã‚“ã¡ã‚ƒã£ã¦ã€‚
ä¸Šè¨˜ãŒã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã§ããªããªã£ã¦ã—ã¾ã£ãŸå•é¡Œã®è§£æ±ºã«ç«‹ã¡å‘ã‹ã£ãŸãƒ¡ãƒ³ãƒãƒ¼ã§ã™ã€‚


ã¨ã¾ã‚Œã€[Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1)ã‚’ä½¿ã£ã¦ã¿ã‚‹è©±ã«æˆ»ã—ã¾ã™ã€‚
ä»¥ä¸‹ã€è©³ç´°ã§ã™ã€‚

## [Nerves Livebook](https://github.com/livebook-dev/nerves_livebook) [v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã‚’ç„¼ã„ã¦å‹•ã‹ã™

```
$ fwup nerves_livebook_rpi4.fw # v0.5.1
```

microSDã‚«ãƒ¼ãƒ‰ã‚’æŒ¿ã—è¾¼ã‚“ã§Run!
[v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ãŒå‹•ãå§‹ã‚ã¾ã™ã€‚

## upload.shã‚’ã¤ãã‚‹

é©å½“ãª[Nerves](https://www.nerves-project.org/)ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ã§ã™(ãŸã¶ã‚“:sweat_smile:)

```
$ export MIX_TARGET=rpi4
$ mix firmware.gen.script
```

## [Nerves Livebook](https://github.com/livebook-dev/nerves_livebook) [v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)ã‚’OTA(Over the Air)ã§ç„¼ã

```
$ ./upload.sh nerves.local nerves_livebook_rpi4.fw # v0.5.0
```

passwordã¯ã€`nerves`ã§ã™ã€‚
ã•ã‚‰ã€œã£ã¨æ›¸ã„ã¦ã„ã¾ã™ãŒã€
<font color="purple">$\huge{Over\ the\ AirğŸš€}$</font>
ã§ã™ã‚ˆ!ã€å¥¥ã•ã‚“!

ä¸€åº¦å†èµ·å‹•ãŒã‹ã‹ã‚Šã¾ã™ã€‚
10ç§’ãã‚‰ã„å¾…ã¡ã¾ã—ã‚‡ã†ã€‚
ç„¦ã‚Šã¯ç¦ç‰©ã§ã™ã€‚


## [Nerves Livebook](https://github.com/livebook-dev/nerves_livebook) [v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)ã§ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹

ã•ãã»ã©ã®æ‰‹é †ã§ã€[v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)ãŒå‹•ã„ã¦ã„ã¾ã™ã€‚
ã“ã®[v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0)ã§ã¯ã€ã‚°ãƒ©ãƒ•è¡¨ç¤ºãŒã§ããªã„å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2022-01-29 23.25.08.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/93cc8413-0661-8af6-64ac-598f45d7ae1f.png)


ã†ã‚“ã€è¡¨ç¤ºã•ã‚Œãªã„ã­ :sob::sob::sob:

## ssh nerves.local


```
$ ssh nerves.local
```

passwordã¯ã€`nerves`ã§ã™ã€‚
sshã§[Nerves](https://www.nerves-project.org/)ã«æ¥ç¶šã§ããŸã‚‰ã€ã‚ã¨ã¯ä¸€ç”Ÿ[Elixir](https://elixir-lang.org/)ã‚’æ¥½ã—ã‚ã¾ã™ã€‚

## [Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1)

ä»Šæ—¥ã¯ã€[Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1)ã‚’**æ¥½ã—ã‚“ã§ã¿ã¾ã™**ã€‚

```
iex> Nerves.Runtime.revert
```

ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€[v0.5.0](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.0) => [v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã«å¤‰ã‚ã‚Šã¾ã™ã€‚
ã‚‚ã¡ã‚ã‚“ã€ä¸€åº¦å†èµ·å‹•ãŒã‹ã‹ã‚Šã¾ã™ã€‚
10ç§’ã»ã©ãŠå¾…ã¡ãã ã•ã„ã€‚
ç„¦ã‚Šã¯ç¦ç‰©ã§ã™ã€‚


## [Nerves Livebook](https://github.com/livebook-dev/nerves_livebook) [v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã§ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ :tada:

ã•ãã»ã©ã®æ‰‹é †ã§ã€[v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ãŒå‹•ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ã“ã®[v0.5.1](https://github.com/livebook-dev/nerves_livebook/releases/tag/v0.5.1)ã§ã¯ã€ã‚°ãƒ©ãƒ•è¡¨ç¤ºãŒã§ãã‚‹ã¯ãšã§ã™ã€‚
ç¢ºã‹ã‚ã¦ã¿ã¾ã™ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2022-01-29 23.25.46.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/131808/2cd2a37f-021b-c9d6-36c0-67bc5404a255.png)


è¡¨ç¤ºã•ã‚Œã¾ã—ãŸ!
:tada::tada::tada:



# Wrapping up :lgtm::lgtm::lgtm::lgtm::lgtm:

Enjoy [Elixir](https://elixir-lang.org/):bangbang::bangbang::bangbang:
<font color="purple">$\huge{Enjoy\ ElixirğŸš€}$</font>

[Nerves.Runtime.revert/1](https://hexdocs.pm/nerves_runtime/Nerves.Runtime.html#revert/1)ã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚
**æ¥½ã—ã¿ã¾ã—ãŸ**ã€‚
ãƒ‡ãƒãƒƒã‚°ã§ã„ã‚ã„ã‚ä½¿ãˆãã†ã§ã™ã€‚

---
2022å¹´ã«æµè¡Œã‚‹æŠ€è¡“äºˆæƒ³ ãƒ¼ãƒ¼ ãã‚Œã¯ã€[Elixir](https://elixir-lang.org/)ã€[Phoenix LiveView](https://github.com/phoenixframework/phoenix_live_view)ã€[Livebook](https://github.com/livebook-dev/livebook)ã€[Nerves Livebook](https://github.com/livebook-dev/nerves_livebook)ã§ã™:rocket::rocket::rocket:

[Elixir](https://elixir-lang.org/)ã®èª•ç”Ÿæ—¥ã¯ã€2012å¹´5æœˆ24æ—¥ã§ã™ã€‚
ãã®ãŸã‚ã€ä»Šå¹´ã®2022å¹´5æœˆ24æ—¥ã¯10å‘¨å¹´ã‚’è¿ãˆã¾ã™ã€‚

```elixir
iex> Date.diff(~D[2022-05-24], ~D[2022-01-29])
115
```


ãã†ãã†ï¼
2æœˆ24æ—¥ç™ºå£²äºˆå®šã®[WEB+DB PRESS](https://gihyo.jp/magazine/wdpress)ã§ã€[Elixir](https://elixir-lang.org/)ã¨[Phoenix](https://www.phoenixframework.org/)ã®ç‰¹é›†ãŒã§ã¾ã™ã‚ˆã€œ

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">æ¬¡å·ã®WEB+DB PRESSã§Elixirã¨Phoenixç‰¹é›†ãŒå‡ºã¾ã™ï¼ãŠæ¥½ã—ã¿ã«ï¼ï¼1 <a href="https://t.co/d4hIfhIfZ1">pic.twitter.com/d4hIfhIfZ1</a></p>&mdash; æ —æ—å¥å¤ªéƒ (@kentaro) <a href="https://twitter.com/kentaro/status/1483308857019760640?ref_src=twsrc%5Etfw">January 18, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>






---

I organize [autoracex](https://autoracex.connpass.com/).
And I belong to [NervesJP](https://nerves-jp.connpass.com/), [fukuoka.ex](https://fukuokaex.connpass.com/), [EDI](https://fukuokaex.connpass.com/).
I hope someday you'll join us.

[We Are The Alchemists, my friends!](https://www.youtube.com/watch?v=04854XqcfCY)





